# Краткое описание проекта.  

## Микросервисы:
- store_warehouse - Склад магазина;  
- storefront - Витрина магазина / торговый зал;  
- bank - Банк.  

  1. Склад магазина - WareHouseApp.  
  
      Порт: 8082  
      База данных: PostgreSQL
      Html страницы:  
          - purchase.html - закупка товара у поставщика - Rick and Morty .  
          - storage.html - товары закупленные на склад, но не выставленные на продажу.  
          - sale.html - товары выставленные на продажу (количество и цена на данном этапе зашиты в код)  
      Веб-контроллер:  
     1. /storage/ - переадресует на страницу /storage/characters/page/1  
      На данной странице загружаются карточки персонажей с адреса https://rickandmortyapi.com/api/character/?page=1  
      Будем считать, что сервис https://rickandmortyapi.com является поставщиком товара -
        в данном случае карточки героев мультфильма.  
      Карточки товара/персонажей можно загружать с сервиса rickandmortyapi.com постранично.
      При выборе товара / клике на карточку товар загружается в базу данных склада (/storage/characters/add_to_storage/{id}/{page}). 
      На этой же странице отображается товар загруженный на склад.
        При выборе товара / клике на карточку в данной области товар удаляется со склада
        (/storage/characters/delete_from_storage/{id}/{page}).
     2. storage/storage/page/{page} - просмотр товаров, находящихся в базе данных склада.  
        При выборе товара / клике на карточку товар выставляется на продажу
        - загружается в базу данных товаров на витрине (storage/storage/add_to_sale/{id}/{page}).  
           Выбранный товар отображается на этой же странице ниже.  
            При выборе товара / клике на карточку в данной области товар снимается с продажи.
          (/storage/storage/delete_from_sale/{id}/{page}).  
     3. storage/sale/page/{page} - просмотр товаров выставленных на продажу.  
       
     REST - контроллер.  
     1. /storage/rest - переадресует к /storage/rest/cards/page/1  
         передает список товаров выставленных на продажу.  
        2. /storage/rest/basket/add_to_basket/{id} - добавляет товар в корзину покупателя.  
        3. /storage/rest/basket/page/{page} - передает список товаров в корзине.
        4. /storage/rest/basket/delete_from_basket/{id} - возвращает на полку товар из корзины покупателя.
        5. /storage/rest/basket/pay - запускает процесс оплаты товара, 
        а именно, создает транзакцию и передает ее сервису банка.
        
2. Витрина магазина / торговый зал - StorefrontApp  
   Порт: 8083  
   База данных: нет
   Html страницы:
    - purchase.html - товар на витрине магазина, выставленный на продажу.
    - basket.html - товар в корзине покупателя.  
   
    Веб-контроллер:
    1. /storefront - переадресует на страницу /storefront/cards/page/1.
       На данной странице отображается товар, выставленный на продажу и загружаемый с сервиса склада магазина.  
       При выборе товара / клике на карточку товар загружается в корзину /storefront/basket/add_to_basket/{id}/{page}
       При этом, номер товара передается в сервис склада магазина 
        для его резервирования в базе данных корзины покупателей.
       2. /storefront/basket/page/{page} - просмотр товаров в корзине.  
          При выборе товара / клике на карточку товар возвращается на полку (/storefront/basket/delete_from_basket/{id}/{page}).  
       При этом, номер товара передается сервису склада магазина для перемещения товара между базами данных.  
       3. /storefront/basket/pay - оплата товара в корзине. Передает информацию сервису склада для запуска процесса оплаты.  
       
3. Банк - BankApp  
   Порт: 8081  
   База данных: PostgreSQL
   Html страницы:  
   - visitors.html - посетители банка, желающие открыть счет. 
    Для эмуляции посетителей их карточки загружаются с сервиса https://rickandmortyapi.com по аналогии со складом магазина.  
   - candidates.html - отобранные кандидаты на открытие счета.  
   - clients.html - клиенты банка.  

   Веб-контроллер:
    1. /bank - переадресует на страницу /bank/visitors/page/1.
       На данной странице загружаются карточки персонажей с адреса https://rickandmortyapi.com/api/character/?page=1  
       Будем считать, что данные персонажи являются посетителями банака и желают открыть счет.
       Посетителей банка/персонажей можно загружать с сервиса rickandmortyapi.com постранично.
       При выборе посетителя / клике на карточку данный посетитель переводится в разряд кандидатов
        и загружается в базу данных банка (/bank/visitors/add_to_bank/{id}/{page}).
       Кандидаты отображаются На этой же странице ниже.
       При выборе кандидата / клике на карточку в данной области кандидат удаляется из базы данных
       (/bank/candidates/delete_from_bank/{id}/{page}).
    2. /bank/candidates/page/{page} - просмотр кандидатов, находящихся в базе данных банка.  
       При выборе кандидата / клике на карточку кандидат переводится в статус клиента
        - загружается в базу данных клиентов банка (/bank/candidates/add_to_client/{id}/{page}).  
          Клиенты отображается на этой же странице ниже.  
          При выборе клиента / клике на карточку в данной области клиент удаляется из базы данных.
          (/bank/clients/delete_client/{id}/{page}).
    3. /bank/clients/page/{page} - просмотр клиентов банка.

   REST - контроллер.
    1. /bank/rest - принимает транзакцию перевода денег.  
   2. /bank/rest/rollback - откат транзакции.  

## Внимание: На стадии разработки сервиса транзакия осуществляется между счетами 1 - продавец и 2 - покупатель.  
